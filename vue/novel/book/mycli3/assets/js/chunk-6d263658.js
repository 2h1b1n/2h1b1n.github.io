(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d263658"],{"0496":function(t,e,n){var i=n("efe2");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},"0d7a":function(t,e,n){"use strict";var i=n("b2a2"),a=n("8a1c"),s=n("857c"),r=n("2732"),o=n("ef4c"),c=n("38eb"),l=n("d88d"),u=n("59da"),h=n("5139"),p=n("efe2"),d=[].push,f=Math.min,g=4294967295,v=!p((function(){return!RegExp(g,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(r(this)),s=void 0===n?g:n>>>0;if(0===s)return[];if(void 0===t)return[i];if(!a(t))return e.call(i,t,s);var o,c,l,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,p+"g");while(o=h.call(v,i)){if(c=v.lastIndex,c>f&&(u.push(i.slice(f,o.index)),o.length>1&&o.index<i.length&&d.apply(u,o.slice(1)),l=o[0].length,f=c,u.length>=s))break;v.lastIndex===o.index&&v.lastIndex++}return f===i.length?!l&&v.test("")||u.push(""):u.push(i.slice(f)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var a=r(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,a,n):i.call(String(a),e,n)},function(t,a){var r=n(i,t,this,a,i!==e);if(r.done)return r.value;var h=s(t),p=String(this),d=o(h,RegExp),C=h.unicode,x=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),b=new d(v?h:"^(?:"+h.source+")",x),m=void 0===a?g:a>>>0;if(0===m)return[];if(0===p.length)return null===u(b,p)?[p]:[];var k=0,E=0,y=[];while(E<p.length){b.lastIndex=v?E:0;var _,D=u(b,v?p:p.slice(E));if(null===D||(_=f(l(b.lastIndex+(v?0:E)),p.length))===k)E=c(p,E,C);else{if(y.push(p.slice(k,E)),y.length===m)return y;for(var I=1;I<=D.length-1;I++)if(y.push(D[I]),y.length===m)return y;E=k=_}}return y.push(p.slice(k)),y}]}),!v)},"22ef":function(t,e,n){"use strict";var i=n("efe2");function a(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},"31a0":function(t,e,n){"use strict";var i=n("1c8b"),a=n("5197"),s=n("0496");i({target:"String",proto:!0,forced:s("link")},{link:function(t){return a(this,"a","href",t)}})},"38eb":function(t,e,n){"use strict";var i=n("f62c").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"3a93":function(t,e,n){"use strict";var i=n("1c8b"),a=n("5197"),s=n("0496");i({target:"String",proto:!0,forced:s("fontsize")},{fontsize:function(t){return a(this,"font","size",t)}})},4194:function(t,e,n){"use strict";var i=n("1c8b"),a=n("5dfd").find,s=n("258f"),r=n("ff9c"),o="find",c=!0,l=r(o);o in[]&&Array(1)[o]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!l},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},5139:function(t,e,n){"use strict";var i=n("99ad"),a=n("22ef"),s=RegExp.prototype.exec,r=String.prototype.replace,o=s,c=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],h=c||u||l;h&&(o=function(t){var e,n,a,o,h=this,p=l&&h.sticky,d=i.call(h),f=h.source,g=0,v=t;return p&&(d=d.replace("y",""),-1===d.indexOf("g")&&(d+="g"),v=String(t).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==t[h.lastIndex-1])&&(f="(?: "+f+")",v=" "+v,g++),n=new RegExp("^(?:"+f+")",d)),u&&(n=new RegExp("^"+f+"$(?!\\s)",d)),c&&(e=h.lastIndex),a=s.call(p?n:h,v),p?a?(a.input=a.input.slice(g),a[0]=a[0].slice(g),a.index=h.lastIndex,h.lastIndex+=a[0].length):h.lastIndex=0:c&&a&&(h.lastIndex=h.global?a.index+a[0].length:e),u&&a&&a.length>1&&r.call(a[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(a[o]=void 0)})),a}),t.exports=o},5197:function(t,e,n){var i=n("2732"),a=/"/g;t.exports=function(t,e,n,s){var r=String(i(t)),o="<"+e;return""!==n&&(o+=" "+n+'="'+String(s).replace(a,"&quot;")+'"'),o+">"+r+"</"+e+">"}},"59da":function(t,e,n){var i=n("2118"),a=n("5139");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var s=n.call(t,e);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"8a1c":function(t,e,n){var i=n("a719"),a=n("2118"),s=n("90fb"),r=s("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==a(t))}},b2a2:function(t,e,n){"use strict";n("e35a");var i=n("1944"),a=n("efe2"),s=n("90fb"),r=n("5139"),o=n("0fc1"),c=s("species"),l=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),h=s("replace"),p=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),d=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var f=s(t),g=!a((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),v=g&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return e=!0,null},n[f](""),!e}));if(!g||!v||"replace"===t&&(!l||!u||p)||"split"===t&&!d){var C=/./[f],x=n(f,""[t],(function(t,e,n,i,a){return e.exec===r?g&&!a?{done:!0,value:C.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),b=x[0],m=x[1];i(String.prototype,t,b),i(RegExp.prototype,f,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}h&&o(RegExp.prototype[f],"sham",!0)}},e35a:function(t,e,n){"use strict";var i=n("1c8b"),a=n("5139");i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ee6f:function(t,e,n){},f540:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reading",style:{"background-color":t.bgColor,color:t.color}},[n("div",{ref:"readBox",staticClass:"reader-content",on:{click:t.openMenu}},[n("section",{ref:"readContent",staticClass:"reader-content-details"},[n("h1",{style:{"font-size":t.titleSize+"px",color:t.tColor}},[t._v(t._s(t.readingData.title))]),n("div",[n("div",{staticClass:"read-content"},[n("div",{staticClass:"read-inner",staticStyle:{"min-height":"667px"},style:{"font-size":t.fontsize+"px"}},t._l(t.readingData.cpContent,(function(e,i){return n("p",{key:i,ref:"size",refInFor:!0},[t._v(t._s(e))])})),0)])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.ispanel,expression:"ispanel"}],staticClass:"top-controll-bar"},[n("span",{staticClass:"back",on:{click:function(e){return t.$router.go(-1)}}},[n("i",{staticClass:"icon"}),n("i",[t._v("返回")])]),n("h1",[t._v(t._s(t.readingData.title))]),n("span",{staticClass:"menu",on:{click:t.isMenu}},[n("i",{staticClass:"icon"}),t.isOpenMenu?n("ul",{staticClass:"drop-down"},[n("li",[n("router-link",{attrs:{to:"/main/bookcity",tag:"a"}},[n("i",{staticClass:"menu-icon"}),n("span",[t._v("首页")])])],1),n("li",[n("router-link",{attrs:{to:"/main/bookshelf",tag:"a"}},[n("i",{staticClass:"menu-icon"}),n("span",[t._v("书架")])])],1),n("li",[n("router-link",{attrs:{to:"/detail",tag:"a"}},[n("i",{staticClass:"menu-icon"}),n("span",[t._v("详情")])])],1)]):t._e()])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.ispanel,expression:"ispanel"}],staticClass:"bottom-controll-panel"},[n("div",{staticClass:"toBookShelf",on:{click:function(e){return t.addBookshelf()}}},[t._v("加入书架")]),n("div",{staticClass:"item"},[n("span",{staticClass:"btn font-btn-w",on:{click:function(e){return t.reduce()}}},[t._v("Aa-")]),n("span",{staticClass:"btn progress-bar"},[n("span",{staticClass:"content-b",style:{width:t.percent+"%"}})]),n("span",{staticClass:"btn font-btn-w",on:{click:function(e){return t.add()}}},[t._v("Aa+")])]),n("div",{staticClass:"item clearfix"},t._l(t.squareList,(function(e,i){return n("span",{key:i,staticClass:"btn square",class:e.isActive?"active":"",on:{click:function(n){return t.toggleSquare(e,i)}}},[t._v(t._s(e.name))])})),0),n("div",{staticClass:"item clearfix"},[n("span",{staticClass:"btn chapter-btn-w fl",on:{click:function(e){return t.previousChapte()}}},[t._v("上一章")]),n("span",{staticClass:"btn directory",on:{click:function(e){return t.showPopup()}}},[t._v("目录")]),n("span",{staticClass:"btn chapter-btn-w mr0 fr",on:{click:function(e){return t.nextChapte()}}},[t._v("下一章")])])]),n("van-popup",{style:{width:"80%",height:"100%"},attrs:{position:"left"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"top-bar"},[n("p",[t._v(t._s(this.$route.query.title))]),n("p",[t._v("目录")])]),n("ul",{staticClass:"chapter-list"},[n("van-list",{staticClass:"chapter-l",attrs:{finished:t.loadOptions.isFinished,"finished-text":t.loadOptions.finishedText},on:{load:t.loadData},model:{value:t.loadOptions.isLoading,callback:function(e){t.$set(t.loadOptions,"isLoading",e)},expression:"loadOptions.isLoading"}},t._l(t.chapterListDatas,(function(e,i){return n("li",{key:i,on:{click:function(e){return t.goReading(i)}}},[n("div",{staticClass:"title-c",class:{current:i==t.currentIndex?"current":""}},[t._v(t._s(e.title))])])})),0)],1)])])],1)},a=[],s=(n("4194"),n("ea69"),n("e35a"),n("0d7a"),n("3a93"),n("31a0"),n("5748")),r=(n("ee6f"),{data:function(){return{squareList:[{name:"默认",isActive:!0,backgroundColor:"#EEE6DD",color:"#5C5D58",tColor:"#333"},{name:"夜间",isActive:!1,backgroundColor:"#0C0C0C",color:"#888888",tColor:"#888"},{name:"护眼",isActive:!1,backgroundColor:"#B8CD8D",color:"#647F50",tColor:"#0c2e10"}],bgColor:"#EEE6DD",color:"#5C5D58",titleSize:24,tColor:"#333",readingData:{},readingDatacpContent:"",ispanel:!1,isOpenMenu:!1,show:!1,allChapterDatas:{},chapterListDatas:{},chapter_id:"",loadOptions:{isLoading:!0,isFinished:!1,isFinishedText:"没有数据可加载了"},loadCount:15,fontsize:20,percent:50,currentIndex:0,chapterIndex:0,cpContent:[]}},created:function(){this.currentIndex=this.$route.query.index,this.getReading(),this.getChapterList()},methods:{getReading:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0});var e=encodeURIComponent(this.$route.query.link);this.axios({method:"GET",url:"http://novel.kele8.cn/chapters/"+e}).then((function(e){t.$toast.clear(),200==e.status&&(t.readingData=e.data.chapter,t.readingData.cpContent=e.data.chapter.cpContent.split("\r\n"))})).catch((function(t){}))},getChapterList:function(){var t=this;this.axios({method:"GET",url:"http://novel.kele8.cn/book-sources?view=summary&book="+this.$route.query.id}).then((function(e){200==e.status&&(t.chapter_id=e.data[0]._id,t.axios({method:"GET",url:"http://novel.kele8.cn/book-chapters/"+t.chapter_id}).then((function(e){if(200==e.status){t.allChapterDatas=e.data.chapters,t.chapterListDatas=t.allChapterDatas.splice(0,t.loadCount),t.allChapterDatas.length>0?t.loadOptions.isLoading=!1:(t.loadOptions.isLoading=!0,t.loadOptions.isFinished=!0),0==t.chapterListDatas.length&&(t.loadOptions.isFinishedText="");var n=encodeURIComponent(t.chapterListDatas[t.currentIndex].link);t.axios({method:"GET",url:"http://novel.kele8.cn/chapters/"+n}).then((function(e){t.$toast.clear(),200==e.status&&(t.readingData=e.data.chapter,t.readingData.cpContent=e.data.chapter.cpContent.split("\r\n"))})).catch((function(t){}))}})).catch((function(e){t.$toast.clear()})))})).catch((function(e){t.$toast.clear()}))},loadData:function(){var t=this;setTimeout((function(){var e;(e=t.chapterListDatas).push.apply(e,Object(s["a"])(t.allChapterDatas.splice(0,t.loadCount))),t.loadOptions.isLoading=!1,0==t.allChapterDatas.length&&(t.loadOptions.isLoading=!0,t.loadOptions.isFinished=!0)}),1e3)},goReading:function(t){this.currentIndex=t,this.show=!1,this.getChapterList()},openMenu:function(){this.ispanel=!this.ispanel},showPopup:function(){this.show=!0,this.ispanel=!this.ispanel,this.getChapterList()},isMenu:function(){this.isOpenMenu=!this.isOpenMenu},addBookshelf:function(){var t=this;if(localStorage.getItem("BID")){var e=JSON.parse(localStorage.getItem("BID")),n=e.find((function(e){return t.$route.query.id==e&&(t.$toast("已存在此书籍"),!0)}));n||(this.$toast("已加入书架"),e.unshift(this.$route.query.id)),localStorage.setItem("BID",JSON.stringify(e))}else{var i=[this.$route.query.id];localStorage.setItem("BID",JSON.stringify(i))}},reduce:function(){this.fontsize=this.fontsize<=16?16:this.fontsize-2,this.percent=this.percent<=0?0:this.percent-25,this.titleSize=this.titleSize<=20?20:this.titleSize-2},add:function(){this.fontsize=this.fontsize>=24?24:this.fontsize+2,this.percent=this.percent>=100?100:this.percent+25,this.titleSize=this.titleSize>=28?28:this.titleSize+2},toggleSquare:function(t,e){if(!t.isActive){for(var n=0;n<this.squareList.length;n++)if(this.squareList[n].isActive){this.squareList[n].isActive=!1;break}this.squareList[e].isActive=!0,this.bgColor=this.squareList[e].backgroundColor,this.color=this.squareList[e].color,this.tColor=this.squareList[e].tColor,this.ispanel=!this.ispanel}},previousChapte:function(){this.currentIndex--,this.getChapterList()},nextChapte:function(){this.currentIndex++,this.getChapterList()}}}),o=r,c=n("9ca4"),l=Object(c["a"])(o,i,a,!1,null,"270ebeb6",null);e["default"]=l.exports}}]);